{% extends 'layout.twig' %}

{% block title %}Recherche — {{ q|default('') }}{% endblock %}

{% block content %}
  <section class="hero-dark">
    <div class="hero-inner">
      <h1 class="hero-title">Recherche</h1>
    </div>
  </section>

  <form action="/search" method="get" class="flex" style="gap:6px; margin-bottom:12px; align-items:center;">
    <input type="text" name="q" value="{{ q|default('') }}" placeholder="Rechercher…" style="min-width:220px; height:32px; padding:6px 10px; border:1px solid #ddd; border-radius:8px;">
    <button class="search-btn" type="submit" aria-label="Rechercher"><img src="/img/search.png" alt="" aria-hidden="true" /><span class="sr-only">Rechercher</span></button>
  </form>

  {% if q is empty %}
    <p class="text-muted">Tapez un terme dans la barre de recherche.</p>
  {% else %}
    {% if clients %}
      <div>
        <div class="title-emph" style="border-bottom:none; padding-bottom:0; margin-bottom:8px;">Clients</div>
        <div class="card client-card client-card-narrow" style="background:#f9fafb; border:1px solid #E5E7EB; border-radius:14px; box-shadow:0 1px 3px rgba(0,0,0,.05); padding:12px 14px; line-height:1.45; margin:8px 0; font-size:.95rem;">
          {% for c in clients %}
            <div class="client-row" style="display:flex; justify-content:space-between; align-items:center; gap:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <div>
                <a href="/clients/{{ c.id }}">{{ c.name }}</a>
                {% if c.email %}<span class="text-muted"> — {{ c.email }}</span>{% endif %}
              </div>
              <div>
                <a class="btn-ghost btn-ghost-sm" href="/clients/{{ c.id }}">Ouvrir</a>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% else %}
      <div class="text-muted">Aucun client</div>
    {% endif %}
  {% endif %}
{% endblock %}
